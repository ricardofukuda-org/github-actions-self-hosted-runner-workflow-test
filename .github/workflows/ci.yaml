name: CI pipeline
on:
#  push:
#    branches:
#      - master
  workflow_dispatch:
  pull_request:
    types: [ opened, synchronize ]
    branches:
      - master
      - develop
      - homolog
jobs:
  run-tests:
    runs-on: github-arc-runner-set
    env:
      DOCKER_IMAGE: "${{ vars.APPLICATION }}:${{ github.sha }}"
    steps:
    - name: Checkout sourcecode
      uses: actions/checkout@v4
    - name: Build image
      run: docker build -t ${{ env.DOCKER_IMAGE }} .
    - name: Run tests
      run: docker run --rm ${{ env.DOCKER_IMAGE }} npm test
      shell: bash

